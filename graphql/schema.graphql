"A datetime string with format `Y-m-d H:i:s`, e.g. `2018-05-23 13:43:32`."
scalar DateTime @scalar(class: "Nuwave\\Lighthouse\\Schema\\Types\\Scalars\\DateTime")

"Indicates what fields are available at the top level of a query operation."
type Query {
    brands: [Brand!] @all @orderBy(column: "name", direction: ASC)
    deviceTypes: [DeviceType!] @all @orderBy(column: "name", direction: ASC)
    orders(team_id: ID @eq): [Orders!]!
        @field(resolver: "Order@getActiveOrders")
        @namespace(field: "App\\Models")
    order(id: ID @eq): Order! @find
    customers(team_id: ID @eq): [Customer!]! @orderBy(column: "first_name", direction: ASC)
        @field(resolver: "Customer@getCustomers")
        @namespace(field: "App\\Models")
    devices: [Device!] @all
    devicesRepared(team_id: ID @eq): [DeviceUnit!]
        @field(resolver: "DeviceUnit@getDeviceUnitsByTenant")
        @namespace(field: "App\\Models")

}

type Mutation {
    updateOrderStatus(id: String, status: String!): Boolean!
        @field(resolver: "OrderMutation@updateStatus")
        @namespace(field: "App\\GraphQL\\Mutations")
    updateCommentVisibility(commentId: String, isPublic: Boolean!): Boolean!
        @field(resolver: "CommentMutation@updateVisibility")
        @namespace(field: "App\\GraphQL\\Mutations")
    updateComment(commentId: String, text: String): Boolean!
        @field(resolver: "CommentMutation@updateText")
        @namespace(field: "App\\GraphQL\\Mutations")
    deleteComment(commentId: String): Boolean!
        @field(resolver: "CommentMutation@delete")
        @namespace(field: "App\\GraphQL\\Mutations")
    addComment(orderId: String, isPublic: Boolean, comment: String): Comment!
        @field(resolver: "CommentMutation@create")
        @namespace(field: "App\\GraphQL\\Mutations")
    addCustomer(customer: CustomerInput): Customer!
        @field(resolver: "CustomerMutation@create")
        @namespace(field: "App\\GraphQL\\Mutations")
    updateCustomer(customerId: String, customer: CustomerInput): Customer!
        @field(resolver: "CustomerMutation@update")
        @namespace(field: "App\\GraphQL\\Mutations")
    addDevice(device: DeviceInput): Device!
        @field(resolver: "DeviceMutation@create")
        @namespace(field: "App\\GraphQL\\Mutations")
    updateDevice(deviceId: String, device: DeviceInput): Device!
        @field(resolver: "DeviceMutation@update")
        @namespace(field: "App\\GraphQL\\Mutations")
    addDeviceUnit(deviceUnit: DeviceUnitInput): DeviceUnit!
        @field(resolver: "DeviceUnitMutation@create")
        @namespace(field: "App\\GraphQL\\Mutations")
    updateDeviceUnit(deviceUnitId: String, deviceUnit: DeviceUnitInput): DeviceUnit!
        @field(resolver: "DeviceUnitMutation@update")
        @namespace(field: "App\\GraphQL\\Mutations")
    addOrder(order: OrderInput): Order!
        @field(resolver: "OrderMutation@create")
        @namespace(field: "App\\GraphQL\\Mutations")
}

type Brand {
    "Unique primary key."
    id: ID!
    "Non-unique name."
    name: String!
    imageUrl: String!
    label: String!
}

input OrderInput {
    customer_id: String!
    device_unit_id: String!
    observation: String!
}

type Order {
    id: ID!
    status: String!,
    customer: Customer!
    device_unit: DeviceUnit!
    created_at: DateTime!
    observation: String!
    comments: [Comment!]
}

type Orders {
    id: ID!
    team_id: ID!
    status: String!,
    customer: Customer!
    device_unit: DeviceUnit!
    created_at: DateTime!
    observation: String!
    comments: [Comment!]
}

type Comment {
    id: ID!
    comment: String!
    created_at: DateTime!
    is_public: Boolean
    user: User
    user_id: ID!
    was_edited: Boolean
}

type User {
    id: ID!
    name: String!
    email: String!
}

input CustomerInput {
    firstName: String! @rules(apply: ["required"])
    lastName: String! @rules(apply: ["required"])
    phone: String! @rules(apply: ["required_without:email"])
    email: String! @rules(apply: ["required_without:phone","email"])
}

type Customer {
    id: ID!
    first_name: String!
    last_name: String!
    fullName: String!
    phone: String!
    email: String!
}

input DeviceUnitInput {
    serial: String!
    device_id: String!
    unlock_type: String!
    unlock_code: String
}

type DeviceUnit {
    id: ID!
    serial: String!
    device_id: String!
    device: Device!
    unlock_type: String!
    unlock_code: String
}

input DeviceInput {
    commercial_name: String!
    tech_name: String!
    brand_id: ID!
    device_type_id: ID!
    url: String
}

type Device {
    id: ID!
    commercial_name: String!
    tech_name: String!
    brand: Brand!
    device_type: DeviceType!
    url: String
}

type DeviceRepaired {
    id: ID!
    commercial_name: String!
    tech_name: String!
    brand: Brand!
    device_type: DeviceType!
    deviceUnit: DeviceUnit!
}

type DeviceType {
    id: ID!
    name: String!
    imageUrl: String!
    label: String!
}